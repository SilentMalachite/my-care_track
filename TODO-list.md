# 障害者支援クライアント管理システム - TODO リスト

## 📅 最終更新日
2025年7月27日

## 🎯 全体進捗
- **完了**: 60% （基盤・データモデル・基本UI）
- **残り**: 40% （フォーム・管理UI・統合・パッケージング）

---

## 🔴 高優先度タスク（必須機能）

### 1. クライアント登録・編集フォームコンポーネント
**ファイル**: `frontend/src/components/clients/ClientForm.tsx`
**テストファイル**: `frontend/src/components/clients/ClientForm.test.tsx`

#### 実装内容
- [ ] **フォームバリデーション**
  - [ ] 必須項目チェック（氏名、生年月日、障害種別等）
  - [ ] 電話番号形式チェック
  - [ ] メールアドレス形式チェック
  - [ ] 生年月日の妥当性チェック（未来日禁止等）
  - [ ] 利用者番号の重複チェック

- [ ] **フォーム要素**
  - [ ] テキスト入力（氏名、カナ、住所等）
  - [ ] セレクトボックス（性別、障害種別、ステータス）
  - [ ] 日付ピッカー（生年月日）
  - [ ] 数値入力（障害等級）
  - [ ] テキストエリア（備考）

- [ ] **UX機能**
  - [ ] リアルタイムバリデーション
  - [ ] エラーメッセージ表示
  - [ ] 送信中ローディング状態
  - [ ] フォームリセット機能
  - [ ] 編集モード（既存データ埋め込み）

- [ ] **テストケース（推定30-40例）**
  - [ ] フォーム表示・入力テスト
  - [ ] バリデーションテスト
  - [ ] 送信・キャンセル操作テスト
  - [ ] エラーハンドリングテスト
  - [ ] アクセシビリティテスト

### 2. 支援計画管理コンポーネント群
**ディレクトリ**: `frontend/src/components/support-plans/`

#### 2.1 SupportPlanList（支援計画一覧）
**ファイル**: `SupportPlanList.tsx`, `SupportPlanList.test.tsx`

- [ ] **表示機能**
  - [ ] クライアント別支援計画一覧
  - [ ] 計画名、期間、ステータス、優先度表示
  - [ ] 進捗率表示（プログレスバー）
  - [ ] 期限切れ警告表示

- [ ] **操作機能**
  - [ ] 新規計画作成ボタン
  - [ ] 計画詳細表示
  - [ ] 計画編集・削除
  - [ ] ステータス一括変更

- [ ] **フィルタリング・ソート**
  - [ ] ステータス別フィルター
  - [ ] 優先度別フィルター
  - [ ] 期間別ソート
  - [ ] 進捗率別ソート

#### 2.2 SupportPlanDetail（支援計画詳細）
**ファイル**: `SupportPlanDetail.tsx`, `SupportPlanDetail.test.tsx`

- [ ] **詳細表示**
  - [ ] 計画基本情報
  - [ ] 目標リスト表示
  - [ ] 進捗状況可視化
  - [ ] 関連サービスログ一覧

- [ ] **操作機能**
  - [ ] 編集・削除ボタン
  - [ ] 目標達成チェック
  - [ ] ステータス変更
  - [ ] PDFエクスポート（将来機能）

#### 2.3 SupportPlanForm（支援計画フォーム）
**ファイル**: `SupportPlanForm.tsx`, `SupportPlanForm.test.tsx`

- [ ] **フォーム項目**
  - [ ] 計画名、目標設定
  - [ ] 開始日・終了日
  - [ ] 優先度・ステータス
  - [ ] 担当スタッフ
  - [ ] 備考・特記事項

- [ ] **バリデーション**
  - [ ] 終了日 > 開始日チェック
  - [ ] 目標の必須チェック
  - [ ] 期間の妥当性チェック

### 3. サービスログ管理コンポーネント群
**ディレクトリ**: `frontend/src/components/service-logs/`

#### 3.1 ServiceLogList（サービス記録一覧）
**ファイル**: `ServiceLogList.tsx`, `ServiceLogList.test.tsx`

- [ ] **表示機能**
  - [ ] 日付別・クライアント別サービス記録
  - [ ] サービス種別、時間、担当者表示
  - [ ] 月次・週次集計表示
  - [ ] カレンダービュー

- [ ] **検索・フィルタ**
  - [ ] 期間指定検索
  - [ ] サービス種別フィルター
  - [ ] 担当者フィルター
  - [ ] ステータスフィルター

#### 3.2 ServiceLogForm（サービス記録フォーム）
**ファイル**: `ServiceLogForm.tsx`, `ServiceLogForm.test.tsx`

- [ ] **記録項目**
  - [ ] サービス日時
  - [ ] サービス種別・時間
  - [ ] 実施内容・特記事項
  - [ ] 次回予定・申し送り

- [ ] **バリデーション**
  - [ ] 未来日禁止
  - [ ] 時間の妥当性チェック
  - [ ] 必須項目チェック

---

## 🟡 中優先度タスク（基盤機能）

### 4. API連携サービス
**ディレクトリ**: `frontend/src/services/`

#### 4.1 API クライアント
**ファイル**: `api.ts`, `api.test.ts`

- [ ] **基本設定**
  - [ ] axios インスタンス設定
  - [ ] ベースURL設定（`http://localhost:3001`）
  - [ ] リクエスト・レスポンスインターセプター
  - [ ] エラーハンドリング

- [ ] **認証（将来機能）**
  - [ ] トークン管理
  - [ ] 自動リフレッシュ
  - [ ] ログアウト処理

#### 4.2 Client API サービス
**ファイル**: `clientService.ts`, `clientService.test.ts`

- [ ] **CRUD操作**
  - [ ] `GET /api/clients` - 一覧取得
  - [ ] `GET /api/clients/:id` - 詳細取得
  - [ ] `POST /api/clients` - 新規作成
  - [ ] `PUT /api/clients/:id` - 更新
  - [ ] `DELETE /api/clients/:id` - 削除

- [ ] **検索・フィルタ**
  - [ ] `GET /api/clients?search=` - 検索
  - [ ] `GET /api/clients?status=` - ステータス別

#### 4.3 SupportPlan API サービス
**ファイル**: `supportPlanService.ts`, `supportPlanService.test.ts`

- [ ] **CRUD操作**
  - [ ] 支援計画の CRUD
  - [ ] クライアント別計画取得

#### 4.4 ServiceLog API サービス
**ファイル**: `serviceLogService.ts`, `serviceLogService.test.ts`

- [ ] **CRUD操作**
  - [ ] サービス記録の CRUD
  - [ ] 期間別記録取得
  - [ ] 集計データ取得

### 5. メインレイアウト・ナビゲーション
**ディレクトリ**: `frontend/src/components/layout/`

#### 5.1 MainLayout（メインレイアウト）
**ファイル**: `MainLayout.tsx`, `MainLayout.test.tsx`

- [ ] **レイアウト構造**
  - [ ] ヘッダー（タイトル、ユーザー情報）
  - [ ] サイドバーナビゲーション
  - [ ] メインコンテンツエリア
  - [ ] フッター（バージョン情報等）

- [ ] **レスポンシブ対応**
  - [ ] モバイル時のハンバーガーメニュー
  - [ ] タブレット・デスクトップ最適化
  - [ ] ダークモード対応（将来機能）

#### 5.2 Navigation（ナビゲーション）
**ファイル**: `Navigation.tsx`, `Navigation.test.tsx`

- [ ] **メニュー項目**
  - [ ] ダッシュボード（概要）
  - [ ] 利用者管理
  - [ ] 支援計画管理
  - [ ] サービス記録
  - [ ] 設定・管理

- [ ] **ナビゲーション機能**
  - [ ] アクティブページハイライト
  - [ ] パンくずリスト
  - [ ] 権限別表示制御（将来機能）

### 6. ルーティング設定
**ファイル**: `frontend/src/App.tsx`, `frontend/src/routes/index.tsx`

- [ ] **React Router設定**
  - [ ] ルート定義
  - [ ] ネストされたルート
  - [ ] 404エラーページ
  - [ ] リダイレクト処理

- [ ] **ルート一覧**
  - [ ] `/` - ダッシュボード
  - [ ] `/clients` - 利用者一覧
  - [ ] `/clients/:id` - 利用者詳細
  - [ ] `/clients/new` - 利用者新規登録
  - [ ] `/clients/:id/edit` - 利用者編集
  - [ ] `/support-plans` - 支援計画一覧
  - [ ] `/service-logs` - サービス記録一覧

---

## 🟢 低優先度タスク（追加機能）

### 7. Rails API コントローラー
**ディレクトリ**: `backend/app/controllers/`

#### 7.1 Clients API
**ファイル**: `clients_controller.rb`, `clients_controller_spec.rb`

- [ ] **CRUD エンドポイント**
  - [ ] `GET /api/clients`
  - [ ] `GET /api/clients/:id`
  - [ ] `POST /api/clients`
  - [ ] `PUT /api/clients/:id`
  - [ ] `DELETE /api/clients/:id`

- [ ] **検索・フィルタ**
  - [ ] 名前・番号による検索
  - [ ] ステータス別フィルタ
  - [ ] ページネーション

#### 7.2 SupportPlans API
**ファイル**: `support_plans_controller.rb`, `support_plans_controller_spec.rb`

- [ ] **CRUD + 関連操作**
  - [ ] 基本CRUD
  - [ ] クライアント別計画取得
  - [ ] ステータス一括更新

#### 7.3 ServiceLogs API
**ファイル**: `service_logs_controller.rb`, `service_logs_controller_spec.rb`

- [ ] **CRUD + 集計**
  - [ ] 基本CRUD
  - [ ] 期間別取得
  - [ ] 月次・年次集計

### 8. Electronラッパー
**ディレクトリ**: `electron/`

#### 8.1 メインプロセス
**ファイル**: `electron/main.ts`

- [ ] **ウィンドウ管理**
  - [ ] メインウィンドウ作成
  - [ ] ウィンドウサイズ・位置保存
  - [ ] 最小化・最大化制御

- [ ] **アプリケーション制御**
  - [ ] アプリ起動・終了処理
  - [ ] マルチプラットフォーム対応
  - [ ] 自動アップデート（将来機能）

#### 8.2 プリロードスクリプト
**ファイル**: `electron/preload.ts`

- [ ] **セキュリティ**
  - [ ] Context Isolation有効化
  - [ ] IPC通信設定
  - [ ] ファイルシステムアクセス制御

### 9. 統合・E2Eテスト
**ディレクトリ**: `frontend/src/test/integration/`

- [ ] **統合テスト**
  - [ ] コンポーネント間連携
  - [ ] API モック統合
  - [ ] ルーティング統合

- [ ] **E2Eテスト（Playwright等）**
  - [ ] ユーザージャーニー全体
  - [ ] クロスブラウザテスト
  - [ ] アクセシビリティ自動テスト

### 10. パッケージング・デプロイメント

#### 10.1 ビルド設定
- [ ] **プロダクションビルド**
  - [ ] 環境変数設定
  - [ ] 最適化設定
  - [ ] アセット圧縮

#### 10.2 Electronパッケージング
- [ ] **マルチプラットフォーム**
  - [ ] Windows (.exe)
  - [ ] macOS (.app, .dmg)
  - [ ] Linux (.AppImage, .deb)

- [ ] **署名・公証**
  - [ ] Code signing
  - [ ] macOS Notarization
  - [ ] Windows証明書

---

## 🔧 開発支援タスク

### 11. 開発環境改善
- [ ] **CI/CD設定**
  - [ ] GitHub Actions
  - [ ] 自動テスト実行
  - [ ] ビルド自動化

- [ ] **コード品質**
  - [ ] ESLint設定強化
  - [ ] Prettier設定
  - [ ] Husky（pre-commit hooks）

### 12. ドキュメント整備
- [ ] **API ドキュメント**
  - [ ] OpenAPI/Swagger
  - [ ] エンドポイント仕様書

- [ ] **ユーザードキュメント**
  - [ ] 操作マニュアル
  - [ ] インストールガイド
  - [ ] トラブルシューティング

---

## 📊 工数見積もり

| カテゴリ | タスク数 | 推定工数 | 優先度 |
|----------|----------|----------|--------|
| **フォーム・UI** | 6 | 15-20時間 | 🔴 高 |
| **API連携** | 4 | 10-15時間 | 🟡 中 |
| **レイアウト** | 2 | 5-8時間 | 🟡 中 |
| **ルーティング** | 1 | 3-5時間 | 🟡 中 |
| **Electron** | 2 | 8-12時間 | 🟢 低 |
| **統合テスト** | 2 | 6-10時間 | 🟢 低 |
| **パッケージング** | 2 | 5-8時間 | 🟢 低 |
| **その他** | 4 | 5-10時間 | 🟢 低 |

**総推定工数**: 57-88時間

## 🎯 推奨実装順序

### フェーズ1: 基本機能完成（高優先度）
1. ClientForm（登録・編集フォーム）
2. API連携サービス
3. メインレイアウト・ナビゲーション
4. ルーティング設定

### フェーズ2: 管理機能拡張（中優先度）
5. SupportPlan管理UI
6. ServiceLog管理UI
7. Rails APIコントローラー

### フェーズ3: デスクトップアプリ化（低優先度）
8. Electronラッパー
9. パッケージング
10. 統合テスト

---

## 📝 注意事項

### 技術的制約
- **SQLite3**: データベースファイルの同期・バックアップ考慮
- **Electron**: セキュリティ設定（Context Isolation等）
- **オフライン**: ネットワーク依存機能の制限

### 業務的考慮事項
- **個人情報保護**: データ暗号化・アクセス制御
- **監査ログ**: 操作履歴記録
- **データ移行**: 既存システムからの移行計画

---

*このTODOリストは開発の進捗に応じて随時更新してください。*